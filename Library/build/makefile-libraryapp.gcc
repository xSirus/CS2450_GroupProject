#---------------------------------------------------------------------------------------------------
# DIRECTORIES
#---------------------------------------------------------------------------------------------------
SOURCE_DIR = src/
INCLUDE_DIR = include/
LIBRARY_DIR = lib/
OBJECT_DIR = obj/
OUTPUT_DIR = bin/

#---------------------------------------------------------------------------------------------------
# VPATH
#---------------------------------------------------------------------------------------------------
vpath %.h $(INCLUDE_DIR)
vpath %.h $(LIBRARY_DIR)
vpath %.cpp $(SOURCE_DIR)
vpath %.cpp $(LIBRARY_DIR)

#---------------------------------------------------------------------------------------------------
# SETTINGS
#---------------------------------------------------------------------------------------------------
CXX = g++
LANGUAGE_STANDARD = -std=c++11
OPTIMIZATIONS = -O2
INCLUDES = -I $(INCLUDE_DIR) -I $(LIBRARY_DIR)
CPPFLAGS = $(LANGUAGE_STANDARD) $(OPTIMIZATIONS) $(INCLUDES)
COMPILE.cpp = $(CXX) $(CPPFLAGS) -c
LINK_FLAGS = -s
RM = DEL
OUTPUT_OPTION = -o $@
LINK_OBJ = $(OBJ)
BIN = $(OUTPUT_DIR)$(PROJECT).exe

#---------------------------------------------------------------------------------------------------
# PROJECT
#---------------------------------------------------------------------------------------------------
PROJECT = library
OBJ = $(OBJECT_DIR)libraryapp.o

#===================================================================================================
# TARGETS
#===================================================================================================
.PHONY: all clean

#---------------------------------------------------------------------------------------------------
# BUILD
#---------------------------------------------------------------------------------------------------
all: $(BIN)

#---------------------------------------------------------------------------------------------------
# CLEAN
#---------------------------------------------------------------------------------------------------
clean: $(OBJ) $(BIN)
	$(RM) $(patsubst %, "%", $^)

#---------------------------------------------------------------------------------------------------
# LINK
#---------------------------------------------------------------------------------------------------
$(BIN): $(LINK_OBJ)
	$(CXX) $(LINK_OBJ) $(LINK_FLAGS) $(OUTPUT_OPTION)

#---------------------------------------------------------------------------------------------------
# COMPILE
#---------------------------------------------------------------------------------------------------
$(OBJECT_DIR)libraryapp.o: libraryapp.cpp
	$(COMPILE.cpp) $^ $(OUTPUT_OPTION)